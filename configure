#!/usr/bin/env bash

set -euo pipefail

set -x

cat <<__EOF__ >mlir-hs.buildinfo
-- File generated by ./configure in root of mlir-hs
-- Note that cabal doesn't seem to check whether this file is stale, so cabal
-- clean may be needed to regenerate it

-- These -optF options are passed to mlir-hs-tblgen-wrapper
ghc-options: $(for x in $(llvm-config --cppflags); do echo -n "-optF$x "; done)
ghc-shared-options: -optl-Wl,-rpath,$(llvm-config --libdir)
ld-options: -Wl,-rpath,$(llvm-config --libdir)
include-dirs: $(llvm-config --includedir)
extra-lib-dirs: $(llvm-config --libdir)

executable: mlir-hs-tblgen-wrapper
cpp-options: -DLLVM_INCLUDE_DIR="$(llvm-config --includedir)"

executable: mlir-hs-tblgen
extra-lib-dirs: $(llvm-config --libdir)
cxx-options: $(llvm-config --cxxflags)
cpp-options: $(llvm-config --cppflags)
include-dirs: $(llvm-config --includedir)
ld-options: -Wl,-rpath,$(llvm-config --libdir)
__EOF__

# Local Variables:
# mode: sh
# End:
